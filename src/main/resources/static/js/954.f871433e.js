"use strict";(self["webpackChunkvue_learning"]=self["webpackChunkvue_learning"]||[]).push([[954],{1954:function(e,a,l){l.r(a),l.d(a,{default:function(){return i}});var o=l(3396);function m(e,a,l,m,t,u){const d=(0,o.up)("el-input"),r=(0,o.up)("el-form-item"),n=(0,o.up)("el-date-picker"),i=(0,o.up)("el-input-number"),s=(0,o.up)("el-button"),f=(0,o.up)("el-upload"),p=(0,o.up)("el-form");return(0,o.wg)(),(0,o.j4)(p,{ref:"form",model:t.form,"label-width":"120px"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{label:"ISBN"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:t.form.isbn,"onUpdate:modelValue":a[0]||(a[0]=e=>t.form.isbn=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,{label:"书名"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:t.form.bookName,"onUpdate:modelValue":a[1]||(a[1]=e=>t.form.bookName=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,{label:"描述"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{type:"textarea",modelValue:t.form.description,"onUpdate:modelValue":a[2]||(a[2]=e=>t.form.description=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,{label:"作者"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:t.form.author,"onUpdate:modelValue":a[3]||(a[3]=e=>t.form.author=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,{label:"出版社"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:t.form.bookCompany,"onUpdate:modelValue":a[4]||(a[4]=e=>t.form.bookCompany=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,{label:"价格"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:t.form.price,"onUpdate:modelValue":a[5]||(a[5]=e=>t.form.price=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,{label:"发布日期"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:t.form.publishDate,"onUpdate:modelValue":a[6]||(a[6]=e=>t.form.publishDate=e),type:"date","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,{label:"总数量"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{modelValue:t.form.totalNumber,"onUpdate:modelValue":a[7]||(a[7]=e=>t.form.totalNumber=e),min:0},null,8,["modelValue"])])),_:1}),t.modifyFlag?((0,o.wg)(),(0,o.j4)(r,{key:0,label:"剩余数量"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{modelValue:t.form.freeNumber,"onUpdate:modelValue":a[8]||(a[8]=e=>t.form.freeNumber=e),min:0,max:t.form.totalNumber},null,8,["modelValue","max"])])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(r,{label:"封面图片"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{"list-type":"picture","auto-upload":!1,"on-change":u.handleFileChange},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{size:"small",type:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("选择图片")])),_:1})])),_:1},8,["on-change"])])),_:1}),(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{type:"primary",onClick:u.submitForm},{default:(0,o.w5)((()=>[(0,o.Uk)("提交")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])}l(560);var t=l(9168),u=l(1120),d={name:"AddBook_mila",data(){return{form:{isbn:"",bookName:"",image:null,description:"",author:"",bookCompany:"",price:"",publishDate:"",totalNumber:0},modifyFlag:!1}},methods:{handleFileChange(e){this.form.image=e.raw},submitForm(){const e=new FormData;for(const a in this.form)"image"===a&&this.form.image?e.append("image",this.form.image):e.append(a,this.form[a]);this.modifyFlag?t.Z.put("api/book/ModifyBook",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{"-1"===e.data.code?this.$message({message:e.data.msg,type:"error"}):this.$message({message:"修改成功",type:"success"})})):t.Z.post("api/book/add",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{"-1"===e.data.code?this.$message({message:e.data.msg,type:"error"}):this.$message({message:e.data.msg,type:"success"})})),u.Z.push("/managementBook"),window.location.reload()}},mounted(){let e=JSON.parse(sessionStorage.getItem("modifyBook"));e&&(this.form=e,this.modifyFlag=!0,sessionStorage.setItem("modifyBook",null))}},r=l(89);const n=(0,r.Z)(d,[["render",m]]);var i=n}}]);
//# sourceMappingURL=954.f871433e.js.map